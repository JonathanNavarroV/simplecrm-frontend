<div class="p-6 space-y-6">
  <h2 class="text-xl font-semibold mb-4">Modal — Demo simple</h2>
  <div class="grid gap-6">
    <section>
      <h3 class="text-sm font-medium text-gray-700 mb-2">Simple</h3>
      <app-button variant="primary" (click)="open('simple')">Abrir modal simple</app-button>
    </section>

    <section>
      <h3 class="text-sm font-medium text-gray-700 mb-2">Confirmación</h3>
      <div class="bg-white rounded">
        <app-button variant="secondary" (click)="open('confirm')"
          >Abrir modal de confirmación</app-button
        >
      </div>
    </section>

    <section>
      <h3 class="text-sm font-medium text-gray-700 mb-2">Eliminar (peligroso)</h3>
      <div class="bg-white rounded">
        <app-button variant="danger" (click)="open('delete')">Abrir modal eliminación</app-button>
      </div>
    </section>

    <section>
      <h3 class="text-sm font-medium text-gray-700 mb-2">Alerta informativa</h3>
      <div class="bg-white rounded">
        <app-button variant="primary" (click)="open('info')">Abrir alerta informativa</app-button>
      </div>
    </section>
  </div>

  <section>
    <h3 class="text-sm font-medium text-gray-700 mb-2">Anidado</h3>
    <div class="bg-white rounded">
      <app-button variant="primary" (click)="openNested()"
        >Abrir modal padre (puede abrir hijo)</app-button
      >
    </div>
  </section>

  <!-- Templates para modales anidados -->
  <ng-template #parentTpl let-data="data">
    <p>Contenido del modal padre.</p>
    <div class="mt-3">
      <app-button variant="secondary" size="sm" (click)="openChild()">Abrir modal hijo</app-button>
    </div>
  </ng-template>

  <ng-template #childTpl let-data="data">
    <p>Contenido del modal hijo (anidado).</p>
    <div class="mt-3">
      <app-button variant="primary" size="sm" (click)="onChildAccept()">Aceptar</app-button>
      <app-button variant="secondary" size="sm" class="ml-2" (click)="openGrandchild()"
        >Abrir nieto</app-button
      >
    </div>
  </ng-template>

  <ng-template #grandTpl let-data="data">
    <p>Contenido del modal nieto (anidado aún más).</p>
    <div class="mt-3">
      <app-button variant="primary" size="sm" (click)="onGrandAccept()">Aceptar nieto</app-button>
    </div>
  </ng-template>

  <!-- Host global que renderiza el modal superior del stack -->
  <app-modal-host></app-modal-host>

  <ng-container *ngIf="isOpen() as modalType">
    <app-modal
      [title]="
        modalType === 'confirm'
          ? 'Confirmar acción'
          : modalType === 'delete'
            ? 'Eliminar elemento'
            : modalType === 'info'
              ? 'Alerta'
              : 'Modal simple'
      "
      [buttons]="
        modalType === 'confirm'
          ? confirmButtons
          : modalType === 'delete'
            ? deleteButtons
            : modalType === 'info'
              ? infoButtons
              : simpleButtons
      "
      (closed)="close()"
      (confirmed)="onConfirm()"
      (action)="onAction($event)"
    >
      <ng-container *ngIf="modalType === 'confirm'">
        <p>¿Estás seguro de ejecutar esta acción?</p>
      </ng-container>
      <ng-container *ngIf="modalType === 'delete'">
        <p class="text-sm text-gray-700">
          Esta acción eliminará el elemento de forma permanente. ¿Deseas continuar?
        </p>
      </ng-container>
      <ng-container *ngIf="modalType === 'info'">
        <p class="text-sm text-gray-700">
          Información importante: la operación se completó correctamente.
        </p>
      </ng-container>
      <ng-container *ngIf="modalType === 'simple'">
        <p>Contenido de ejemplo dentro del modal simple. Añade lo que quieras aquí.</p>
      </ng-container>
    </app-modal>
  </ng-container>
</div>
