<div class="text-input">
  <label *ngIf="label" class="text-xs text-gray-600 mb-1 block">{{ label }}</label>

  <div
    *ngIf="!isSkeleton"
    class="relative w-full rounded border border-gray-300 focus-within:ring-1 focus-within:ring-indigo-200 focus-within:border-indigo-500"
    [class.border-red-500]="!!displayError"
    [class.bg-gray-200]="disabled || isLoading"
  >
    <input
      [attr.aria-invalid]="!!displayError"
      [attr.aria-disabled]="disabled || isLoading"
      [attr.aria-busy]="isLoading"
      [class.text-gray-400]="disabled || isLoading"
      [class.pr-10]="isLoading"
      class="w-full px-3 py-2 text-sm bg-transparent placeholder-gray-400 focus:outline-none"
      [placeholder]="placeholder"
      [value]="value"
      [disabled]="disabled || isLoading"
      (input)="onInput($event)"
      (blur)="onTouched()"
    />

    <div *ngIf="isLoading" class="absolute inset-y-0 right-2 flex items-center">
      <span
        class="w-4 h-4 border-2 border-t-transparent border-gray-500 rounded-full animate-spin"
        aria-hidden="true"
      ></span>
    </div>
  </div>

  <div *ngIf="isSkeleton" class="relative w-full animate-pulse">
    <div
      class="px-3 py-2 h-9.5 rounded border border-gray-300 bg-gradient-to-r from-gray-200 via-gray-100 to-gray-200 bg-[length:200%_100%] animate-shimmer"
    ></div>
  </div>

  <div *ngIf="displayError" class="error-message mt-1 text-xs text-red-600">{{ displayError }}</div>
</div>
