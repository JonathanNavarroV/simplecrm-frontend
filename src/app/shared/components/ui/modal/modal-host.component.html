<ng-container *ngIf="current$ | async as item">
  <div
    [appCloseOnInteract]="true"
    [closeOnOutsideClick]="true"
    [closeOnEscape]="true"
    (requestClose)="modalStack.back()"
  >
    <app-modal
      [title]="item.title || ''"
      [buttons]="item.buttons"
      [showBack]="((stack$ | async)?.length || 0) > 1"
      (back)="modalStack.back()"
      (closed)="modalStack.back()"
      (action)="handleAction($event)"
    >
      <ng-container *ngIf="item.template">
        <ng-container
          *ngTemplateOutlet="item.template; context: { data: item.data }"
        ></ng-container>
      </ng-container>
    </app-modal>
  </div>
</ng-container>
